<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Device Details</title>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
    integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: #ffed80;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px;
    }

    #deviceDetails {
      font-size: 18px;
      background-color: #fff6c3;
      color: #57534E;
      padding: 20px 30px;
      font-weight: 600;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
    }

    #deviceDetails h2 {
      margin-top: 0;
      text-align: center;
    }

    .detail {
      margin: 10px 0;
      line-height: 1.5;
    }

    /* Style for the input and label */
    .input-container {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    label {
      margin-right: 10px;
      font-size: 16px;
    }

    input[type="text"] {
      padding: 8px;
      font-size: 16px;
      width: 100%;
      max-width: 300px;
      border-radius: 25px;
      border: 1px solid #ccc;
      background-color: #f2f2f2;
    }

    button {
      padding: 10px 20px;
      margin-top: 20px;
      font-size: 16px;
      background-color: #d1a93d;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #bb942c;
    }
  </style>
</head>

<body>
  <div class="input-container">
    <label for="userName">Enter Your Name:</label>
    <input type="text" id="userName" placeholder="Enter your name" />
  </div>

  <div id="deviceDetails">
    <h2>Device Details</h2>
    <div id="detailsContainer"></div>
  </div>

  <button id="downloadBtn">Download Device Details</button>

  <script>
    // Debounce function to limit the number of times the details are updated while typing
    function debounce(func, delay) {
      let timeout;
      return function (...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), delay);
      };
    }

    // Function to get device type
    function getDeviceType() {
      const width = window.innerWidth;
      if (width <= 768) return "Mobile";
      else if (width <= 1024) return "Tablet";
      return "Laptop/Desktop";
    }

    // Function to get operating system
    function getOS() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      if (/windows phone/i.test(userAgent)) return "Windows Phone";
      if (/android/i.test(userAgent)) return "Android";
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) return "iOS";
      if (/Macintosh|Mac OS X/i.test(userAgent)) return "MacOS";
      if (/Windows NT/i.test(userAgent)) return "Windows";
      if (/Linux/i.test(userAgent)) return "Linux";
      return "Unknown OS";
    }

    // Function to get browser name
    function getBrowserName() {
      const userAgent = navigator.userAgent;
      if (userAgent.indexOf("Firefox") > -1) return "Mozilla Firefox";
      if (userAgent.indexOf("Chrome") > -1) return "Google Chrome";
      if (userAgent.indexOf("Safari") > -1 && userAgent.indexOf("Chrome") === -1) return "Safari";
      if (userAgent.indexOf("Edge") > -1) return "Microsoft Edge";
      if (userAgent.indexOf("Trident") > -1) return "Internet Explorer";
      return "Unknown Browser";
    }

    // Function to get device manufacturer
    function getDeviceInfo() {
      const userAgent = navigator.userAgent;
      if (/Samsung/i.test(userAgent)) return "Samsung";
      if (/Huawei/i.test(userAgent)) return "Huawei";
      if (/OnePlus/i.test(userAgent)) return "OnePlus";
      if (/Xiaomi/i.test(userAgent)) return "Xiaomi";
      if (/iPhone/i.test(userAgent)) return "Apple";
      if (/Pixel/i.test(userAgent)) return "Google Pixel";
      return "Unknown Device";
    }

    // Function to get aspect ratio (simplified to common ratios)
    function getAspectRatio() {
      const width = window.screen.width;
      const height = window.screen.height;

      // Find GCD
      const gcd = (a, b) => (b === 0 ? a : gcd(b, a % b));
      const divisor = gcd(width, height);

      const simplifiedWidth = width / divisor;
      const simplifiedHeight = height / divisor;

      // Predefined common aspect ratios for devices
      const aspectRatio = `${simplifiedWidth}:${simplifiedHeight}`;

      const standardRatios = {
        "4:3": [4, 3],
        "16:9": [16, 9],
        "21:9": [21, 9],
        "3:2": [3, 2],
        "5:4": [5, 4],
      };

      // Map the simplified ratio to a known common ratio
      for (let ratio in standardRatios) {
        const [widthRatio, heightRatio] = standardRatios[ratio];
        if (
          Math.abs(simplifiedWidth / simplifiedHeight - widthRatio / heightRatio) < 0.1
        ) {
          return ratio;
        }
      }

      // Special cases for mobile and tablet devices
      if (width <= 768) return "9:16";  // Portrait mobile
      if (width <= 1024) return "4:3";  // Tablet

      return aspectRatio; // Return simplified aspect ratio if no match
    }

    // Function to get all details
    function getDeviceDetails(userName) {
      return {
        "User Name": userName || "N/A",
        "Device Type": getDeviceType(),
        "Operating System": getOS(),
        "Browser": getBrowserName(),
        "Manufacturer": getDeviceInfo(),
        "Screen Resolution": `${window.screen.width} x ${window.screen.height}`,
        "Aspect Ratio": getAspectRatio(),
        "Pixel Ratio": window.devicePixelRatio.toFixed(2),
      };
    }

    // Function to update device details
    function updateDeviceDetails() {
      const userName = document.getElementById("userName").value;
      const details = getDeviceDetails(userName);
      const detailsContainer = document.getElementById("detailsContainer");
      detailsContainer.innerHTML = Object.entries(details)
        .map(([key, value]) => `<div class="detail"><strong>${key}:</strong> ${value}</div>`)
        .join("");
    }

    // Function to capture the device details as an image
    function captureAsImage() {
      const detailsContainer = document.getElementById("deviceDetails");
      html2canvas(detailsContainer).then(canvas => {
        // Create a link to download the image
        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/png");
        link.download = "device-details.png";
        link.click();
      });
    }

    // Attach debounced update function to the input
    const debouncedUpdate = debounce(updateDeviceDetails, 500);
    document.getElementById("userName").addEventListener("input", debouncedUpdate);

    // Display device details as soon as the page loads
    window.onload = updateDeviceDetails;

    // Add event listener to the download button
    document.getElementById("downloadBtn").addEventListener("click", captureAsImage);
  </script>
</body>

</html>